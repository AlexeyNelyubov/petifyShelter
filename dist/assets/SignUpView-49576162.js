import{r as e,m as k,v as S,o as _,c as h,p as V,k as B,a as F,b as I,d as U,e as w,l as c}from"./index-5085597f.js";import{_ as b,a as A,b as E}from"./AuthentificationButtonAndEnformation-2e27a718.js";import{_ as j}from"./EnformationField.vue_vue_type_style_index_0_lang-8b9e47d8.js";import"./AuthentificationButton-6bcfeb1e.js";const P=["placeholder"],x={__name:"UserName",props:{placeholder:{type:String,required:!0}},emits:["change-userName"],setup(y,{emit:v}){const o=y;V(d=>({"5fb1670e":r.value,"1edaf8dc":n.value}));const t=e(""),l=e(!1),n=e("#000"),r=e("0px");o.placeholder==="Фамилия"&&(r.value="24px");const u=()=>{t.value.length?(n.value="#008000",l.value=!0):(l.value=!1,n.value="#ff0000"),v("change-userName",t.value,l.value)};return(d,m)=>k((_(),h("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=f=>t.value=f),placeholder:o.placeholder,class:"userName-input",onFocus:u,onInput:u,onBlur:u,required:""},null,40,P)),[[S,t.value]])}};const T={__name:"City",emits:["change-city"],setup(y,{emit:v}){V(n=>({"51da9368":t.value}));const o=e(""),t=e("#000"),l=()=>{o.value.length?t.value="#008000":t.value="#000",v("change-city",o.value)};return(n,r)=>k((_(),h("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=u=>o.value=u),placeholder:"Город",class:"city-input",onFocus:l,onInput:l,onBlur:l},null,544)),[[S,o.value]])}};const q={class:"signUp"},O={key:0,class:"signUp-field"},D={class:"sigUp-firstName-lastName"},G={__name:"SignUpView",setup(y){const v=B(),o=e(""),t=e(!1),l=e(""),n=e(!1),r=e(""),u=e(!1),d=e(""),m=e(""),f=e(!1),p=e(""),g=e(""),N=e(!1),$=()=>{const C=JSON.stringify({firstName:o.value,lastName:l.value,email:r.value,city:d.value,password:m.value});(async()=>{try{let s=await fetch("https://petify-shelter-back.onrender.com/api/v1/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:C}),a=await s.json();s.ok?(localStorage.setItem("token",a.token),v.logIn(a.user),N.value=!0,g.value="На указанный email отправлено письмо для подтверждения электронной почты"):a==="Пользователь с таким email уже существует"?(g.value=a,N.value=!1):(console.log(a),p.value="Сервер не отвечает! Перезагрузите страницу и попробуйте ещё раз")}catch(s){console.error(s.message),p.value="Сервер не отвечает! Перезагрузите страницу и попробуйте ещё раз"}})()};return(C,s)=>(_(),h("main",null,[p.value?(_(),F(I,{key:0,message:p.value},null,8,["message"])):U("",!0),w("div",q,[p.value?U("",!0):(_(),h("div",O,[c(E,{typeAuth:"Регистрация через"}),w("div",D,[c(x,{placeholder:"Имя",onChangeUserName:s[0]||(s[0]=(a,i)=>{o.value=a,t.value=i})}),c(x,{placeholder:"Фамилия",onChangeUserName:s[1]||(s[1]=(a,i)=>{l.value=a,n.value=i})})]),c(j,{onChangeEmail:s[2]||(s[2]=(a,i)=>{r.value=a,u.value=i,g.value=""})}),c(T,{onChangeCity:s[3]||(s[3]=a=>d.value=a)}),c(b,{onChangePassword:s[4]||(s[4]=(a,i)=>{m.value=a,f.value=i})}),c(A,{buttonName:"Зарегистрироваться",isCorrectNewUserInformation:t.value&&n.value&&u.value&&f.value,showValidationFromServer:g.value,successAuth:N.value,onAuthentification:$},null,8,["isCorrectNewUserInformation","showValidationFromServer","successAuth"])]))])]))}};export{G as default};
