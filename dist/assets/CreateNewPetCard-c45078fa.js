import{r as d,o as r,c as _,e as l,h as P,m as h,x as C,p as S,y as B,v as V,q as U,z as N,F,g as z,A as T,f as I,d as p,l as y,w as f,T as $,a as g,t as b,s as A,k as j,b as D}from"./index-d7283c15.js";import{_ as G}from"./AuthentificationButton-f26e9204.js";const q={class:"pet-type"},E=l("p",{class:"pet-type__title"},"Выберите вид животного",-1),J={class:"pet-type__items"},M={style:{"margin-right":"24px"}},R={style:{"margin-right":"24px"}},K={__name:"PetType",emits:["change-pet-type"],setup(m,{emit:u}){const e=d(""),t=()=>{u("change-pet-type","type",e.value)};return(a,o)=>(r(),_("main",q,[E,l("div",J,[l("label",M,[P("Кот "),h(l("input",{type:"radio",value:"Кот","onUpdate:modelValue":o[0]||(o[0]=n=>e.value=n),onChange:t},null,544),[[C,e.value]])]),l("label",R,[P("Собака "),h(l("input",{type:"radio",value:"Собака","onUpdate:modelValue":o[1]||(o[1]=n=>e.value=n),onChange:t},null,544),[[C,e.value]])]),l("label",null,[P("Птица "),h(l("input",{type:"radio",value:"Птица","onUpdate:modelValue":o[2]||(o[2]=n=>e.value=n),onChange:t},null,544),[[C,e.value]])])])]))}};const L={class:"pet-gender"},H=l("p",{class:"pet-gender__title"},"Выберите пол питомца",-1),Q={class:"pet-gender__items"},W={style:{"margin-right":"24px"}},X={__name:"PetGender",emits:["change-pet-gender"],setup(m,{emit:u}){const e=d(""),t=()=>{u("change-pet-gender","gender",e.value)};return(a,o)=>(r(),_("main",L,[H,l("div",Q,[l("label",W,[P("Мальчик "),h(l("input",{type:"radio",value:"Мальчик","onUpdate:modelValue":o[0]||(o[0]=n=>e.value=n),onChange:t},null,544),[[C,e.value]])]),l("label",null,[P("Девочка "),h(l("input",{type:"radio",value:"Девочка","onUpdate:modelValue":o[1]||(o[1]=n=>e.value=n),onChange:t},null,544),[[C,e.value]])])])]))}};const Y={class:"pet-name"},Z=l("p",{class:"pet-name__title"},"Введите имя питомца",-1),ee=l("p",{class:"pet-name__enformation-sign"}," * В имени животного могут присутствовать только заглавные и прописные буквы русского алфавита, а также пробел и дефис. ",-1),te={__name:"PetName",emits:["change-pet-name"],setup(m,{emit:u}){S(o=>({e5723650:t.value}));const e=d(""),t=d("#000");return B(()=>{if(e.value.length>0&&/^[а-яА-ЯёЁ]{2,}$/.test(e.value)||/^[а-яА-ЯёЁ]{2,}[\-\ ][а-яА-ЯёЁ]{2,}$/.test(e.value)){u("change-pet-name","name",e.value);return}t.value="#ff0000"},"Enter"),(o,n)=>(r(),_("main",Y,[Z,h(l("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=s=>e.value=s),placeholder:"Имя",class:"pet-name__input",onInput:n[1]||(n[1]=s=>t.value="#000")},null,544),[[V,e.value]]),ee]))}};const ae={class:"pet-breeds"},ne=l("p",{class:"pet-breeds__title"},"Укажите породу",-1),se=["onUpdate:modelValue","onInput"],le=l("p",{class:"pet-breeds__enformation-sign"}," *Если вы затрудняетесь, то укажите беспородная. Если питомец - метис, то нажмите + и укажите две породы. Допускаются только заглавные и прописные буквы русского алфавита, а также пробел и дефис. ",-1),re={__name:"PetBreed",emits:["change-pet-breeds"],setup(m,{emit:u}){const e=d([{value:"",color:"#000"}]),t=d(!1),a=U(()=>t.value?[0,1]:[0]);return N(t,()=>{e.value.push({value:"",color:"#000"})}),B(()=>{const n=[];for(let s in e.value)if(/^[а-яА-ЯёЁ]{2,}$/.test(e.value[s].value)||/^[а-яА-ЯёЁ]{2,}[ ][а-яА-ЯёЁ]{2,}$/.test(e.value[s].value)||/^[а-яА-ЯёЁ]{2,}[\-][а-яА-ЯёЁ]{2,}$/.test(e.value[s].value))n.push(e.value[s].value),e.value[s].color="#000";else{e.value[s].color="#ff0000";return}if(n){if(t.value&&e.value[1].length&&n.length===1)return;console.log(n),u("change-pet-breeds","breeds",n)}},"Enter"),(n,s)=>(r(),_("main",ae,[ne,(r(!0),_(F,null,z(I(a),i=>(r(),_("div",{key:i.id},[h(l("input",{type:"text","onUpdate:modelValue":k=>e.value[i].value=k,placeholder:"Порода",class:T(["pet-breeds__input",{"pet-breeds__input_bordercolor":e.value[i].color==="#ff0000"}]),onInput:k=>e.value[i].color="#000"},null,42,se),[[V,e.value[i].value]])]))),128)),t.value?p("",!0):(r(),_("div",{key:0,class:"pet-breeds__show-second-input",onClick:s[0]||(s[0]=i=>t.value=!0)}," + ")),le]))}},oe="/petifyShelter/assets/upload-8009e9e0.svg";const ue={class:"pet-avatar"},ie=l("p",{class:"pet-avatar__title"},"Загрузите основное фото питомца",-1),_e={class:"pet-avatar__download"},pe=l("img",{src:oe,alt:"img-upload",width:"50"},null,-1),ce={class:"pet-avatar__label"},de={__name:"PetAvatar",emits:["change-pet-avatar"],setup(m,{emit:u}){const e=t=>{const a=t.target.files[0];u("change-pet-avatar","avatar",a)};return(t,a)=>(r(),_("main",ue,[ie,l("div",_e,[pe,l("label",ce,[P("Выберите файл"),l("input",{type:"file",accept:"image/*",class:"pet-avatar__input",onChange:e},null,32)])])]))}};const ve={class:"new-pet-card-fill"},me=l("p",{class:"new-pet-card-fill__title"},"Создание карточки питомца",-1),ge={__name:"FillNewPetCard",props:{currentItem:{type:String,required:!0}},emits:["change-item"],setup(m,{emit:u}){const e=m,t=d("type"),a=(o,n)=>{u("change-item",o,n)};return N(()=>e.currentItem,()=>t.value=e.currentItem),(o,n)=>(r(),_("div",ve,[y($,{appear:"",name:"new-pet-card-title"},{default:f(()=>[me]),_:1}),y($,{appear:"",name:"new-pet-card-fill-item"},{default:f(()=>[t.value==="type"?(r(),g(K,{key:0,onChangePetType:n[0]||(n[0]=(s,i)=>{a(s,i),t.value="gender"})})):p("",!0)]),_:1}),y($,{name:"new-pet-card-fill-item"},{default:f(()=>[t.value==="gender"?(r(),g(X,{key:0,onChangePetGender:n[1]||(n[1]=(s,i)=>{a(s,i),t.value="name"})})):p("",!0)]),_:1}),y($,{name:"new-pet-card-fill-item"},{default:f(()=>[t.value==="name"?(r(),g(te,{key:0,onChangePetName:n[2]||(n[2]=(s,i)=>{a(s,i),t.value="breeds"})})):p("",!0)]),_:1}),y($,{name:"new-pet-card-fill-item"},{default:f(()=>[t.value==="breeds"?(r(),g(re,{key:0,onChangePetBreeds:n[3]||(n[3]=(s,i)=>{a(s,i),t.value="avatar"})})):p("",!0)]),_:1}),y($,{name:"new-pet-card-fill-item"},{default:f(()=>[t.value==="avatar"?(r(),g(de,{key:0,onChangePetAvatar:n[4]||(n[4]=(s,i)=>{a(s,i),t.value="type"})})):p("",!0)]),_:1})]))}};const ye={class:"new-pets-card-show"},he={__name:"ShowNewPetCard",props:{newPet:{type:Object,required:!0},changeSize:{type:Boolean,required:!0}},emits:["get-current-item"],setup(m){const u=m;S(t=>({"45b26a25":I(e)}));const e=U(()=>u.changeSize?"1000px":"500px");return(t,a)=>(r(),_("div",ye,[u.newPet.type?(r(),_("div",{key:0,onClick:a[0]||(a[0]=o=>t.$emit("get-current-item","type")),class:"new-pets-card-show__item"}," Вид : "+b(u.newPet.type),1)):p("",!0),u.newPet.gender?(r(),_("div",{key:1,onClick:a[1]||(a[1]=o=>t.$emit("get-current-item","gender")),class:"new-pets-card-show__item"}," Пол : "+b(u.newPet.gender),1)):p("",!0),u.newPet.name?(r(),_("div",{key:2,onClick:a[2]||(a[2]=o=>t.$emit("get-current-item","name")),class:"new-pets-card-show__item"}," Имя: "+b(u.newPet.name),1)):p("",!0),u.newPet.breeds?(r(),_("div",{key:3,onClick:a[3]||(a[3]=o=>t.$emit("get-current-item","breeds")),class:"new-pets-card-show__item"}," Порода: "+b(u.newPet.breeds.join(", ")),1)):p("",!0),u.newPet.avatar?(r(),_("div",{key:4,onClick:a[4]||(a[4]=o=>t.$emit("get-current-item","avatar")),class:"new-pets-card-show__item"}," Аватар карточки: ✔ ")):p("",!0)]))}};const we={class:"new-pet-card"},fe={key:0,class:"new-pet-card__information-sign"},$e=l("p",null,"Вы находитесь в демо режиме.",-1),Pe=l("p",null,"Для создания карточки необходимо авторизироваться.",-1),Ce=[$e,Pe],Ne={__name:"CreateNewPetCard",setup(m){const u=A(),e=j(),t=d(""),a=d({}),o=d(),n=d(!0),s=d(!1);N(a.value,()=>{Object.keys(a.value).length===5&&(s.value=!0,n.value=!1),console.log(a.value)});const i=d("");if(N(i,()=>{n.value=!0}),localStorage.getItem("newPet")){const v=JSON.parse(localStorage.getItem("newPet"));for(let c in v)c!=="avatar"&&(a.value[c]=v[c]);console.log(a.value)}const k=(v,c)=>{console.log(v,c),v!=="avatar"?(a.value[v]=c,localStorage.setItem("newPet",JSON.stringify(a.value))):(a.value[v]=!0,localStorage.setItem("newPet",JSON.stringify(a.value)),o.value=c)},O=()=>{const v=JSON.stringify(a.value),c=new FormData;c.append("newPet",v),c.append("avatar",o.value),(async()=>{try{const w=await fetch("https://petify-shelter-back-8t20.onrender.com/api/v1/pet/add-pet",{method:"POST",body:c}),x=await w.json();w.ok?(console.log(x),localStorage.removeItem("newPet"),u.push({name:"IndexPage"})):(console.log(x),t.value="Сервер не отвечает! Перезагрузите страницу и попробуйте ещё раз.",a.value={})}catch(w){console.error(w.message),t.value="Сервер не отвечает! Перезагрузите страницу и попробуйте ещё раз.",a.value={}}})()};return(v,c)=>(r(),_("main",we,[I(e).authentificated?p("",!0):(r(),_("div",fe,Ce)),t.value?(r(),g(D,{key:1,message:t.value},null,8,["message"])):p("",!0),!t.value&&(!s.value||n.value)?(r(),g(ge,{key:2,onChangeItem:k,currentItem:i.value},null,8,["currentItem"])):p("",!0),a.value.type?(r(),_("div",{key:3,class:T({"new-pet-card__show-pet-card":!s.value,"new-pet-card__ready-to-create":s.value})},[y(he,{newPet:a.value,changeSize:s.value,onGetCurrentItem:c[0]||(c[0]=w=>i.value=w)},null,8,["newPet","changeSize"]),s.value&&!n.value?(r(),g(G,{key:0,buttonName:"Создать",isCorrectNewUserInformation:I(e).authentificated,onAuthentification:O},null,8,["isCorrectNewUserInformation"])):p("",!0)],2)):p("",!0)]))}};export{Ne as default};
